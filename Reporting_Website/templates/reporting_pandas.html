{% extends "template.html" %}

{% block pagetitle %}
    Reportings - Futuristic Technologies
{% endblock %}

{% block header %}
    
{% endblock %}

{% block content %}
    <section style="max-width: 1200px;">
      <!-- Display the Pandas DataFrame as an HTML table -->

        
        <style>
            .table-container {
                max-height: 55vh;
                overflow-y: auto; /* Enable vertical scrollbar */
            }
            
            .table {
                width: 100%; /* Ensure table fills container */
                border-collapse: collapse; /* Collapse table borders */
            }
            
            .sticky-header {
                position: sticky;
                top: 0;
                z-index: 1;
                background-color: white;
            }
            
            .sticky-header th {
                background-color: white; /* Optional: Match background color of sticky header with container background */
            }
        </style>
    <div class="table-container">
        <table class="table table-striped" style="max-height:500px;">
            <thead class="sticky-header">
                <tr>
                    <th>Event ID</th>
                    <th>Timestamp</th>
                    <th>IP</th>
                    <th>Location</th>
                    <th>Service</th>
                    <th>Tag</th>
                    <th>Attempts</th>
                    <th>Additional Data</th>
                    <th>Trap Name</th>
                </tr>
            </thead>
            <tbody>
                {% for row in table_html %}
                <tr>
                    <td>{{ row['event_id'] }}</td>
                    <td>{{ row['timestamp'] }}</td>
                    <td>{{ row['ip'] }}</td>
                    <td>{{ row['location'] }}</td>
                    <td>{{ row['service'] }}</td>
                    <td>{{ row['tag'] }}</td>
                    <td>{{ row['attempts'] }}</td>
                    <td>{{ row['additional_data'] }}</td>
                    <td>{{ row['trap_name'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

        <form method="post" action="">
            <br><br>
            <input type="hidden" name="raw_data" value="{{ table_html }}">

            <button name ="button" id="button"class="button btn btn-primary" type="submit" value="back">back</button> 
            <button name="button" id="button" class="button btn btn-primary" type="submit" value="Export to mail">Export to mail</button>        
       
        </form>
        
        {% with messages = get_flashed_messages() %}
        {% if messages %}
            <script>
            var messages = {{ messages | safe }};
            for (var i=0; i<messages.length; i++) {
                alert(messages[i]);
            }
            </script>
        {% endif %}
        {% endwith %}
    </section>

{% endblock %}

{% block footer %}
    <footer>
        <p>&copy; 2024 - Futuristic Technologies. All rights reserved.</p>
    </footer>
{% endblock %}
